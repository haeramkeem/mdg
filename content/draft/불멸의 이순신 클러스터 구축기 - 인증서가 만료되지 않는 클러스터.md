## Pain point - 왜 이런짓을?

- 일반적으로 [Kubeadm](https://kubernetes.io/docs/reference/setup-tools/kubeadm) 은 CA 인증서는 10년, CA-signed 인증서는 1년 뒤에 만료되도록 설정하여 인증서를 발급한다.
- 그 이유는
	- 주기적으로 인증서를 재발급하도록 하여 보안 강화
		- CA-Signed 인증서 만료기간을 1년 이상으로 하는 것은 Security Issue 를 야기할 수 있다고 [여기](https://github.com/kubernetes/kubeadm/issues/1505#issuecomment-482798539) 에서 그랬다
	- 주기적으로 클러스터 버전을 업그레이드 하도록 유도
		- Kubeadm 은 클러스터 버전 업그레이드 시에 인증서도 재발급하는 정책으로 [클러스터 관리자들이 주기적으로 버전을 업그레이드 하여 클러스터 버전을 최신으로 유지시키고 동시에 보안성도 강화](https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/#automatic-certificate-renewal) 하도록 유도하더라
- 하지만 이것은 폐쇄망 환경일 때 오히려 방해가 되기도 한다.
	- 높은 보안 수준을 위해 폐쇄망으로 클러스터를 구축했기에 오히려 인증서 재발급을 통한 보안 강화는 굳이? 의 느낌이 강하다.
	- 폐쇄망 환경을 요구하는 보안이 중요한 곳에서는 소프트웨어 보안 심사 등을 버전마다 받는 것이 힘들기 때문에 그냥 한 버전으로 고정시켜 놓기도 한다.
		- 또한 폐쇄망에서 클러스터 버전을 업그레이드 하는 것은 생각보다 고되다. `.deb` 등의 패키지 파일, 컨테이너 이미지 파일 등을 전부 다운받아 폐쇄망 환경으로 갖고 들어가 작업해야 하기 때문
- 따라서 나는 이 클러스터를 적어도 내가 살아 있는 한 인증서가 만료되지 않게 하려고 한다

## Step 1. Kubeadm 인증서 분석

- 쿠버네티스 controlplane 이 사용하는 인증서에 대한 것은 [[Kubernetes Controlplane TLS Explained - Kubeadm 이 생성해주는 인증서 톺아보기]]를 확인하자
- 정리하면 클러스터가 생성될 때 ca, etcd-ca, front-proxy-ca 가 생성되고 이것들을 이용해 각 controlplane 구성요소들이 사용할 인증서들이 생성되게 된다.
- 따라서 기간을 임의로 바꾸려면 

## Step 2. CA 인증서 생성하기

## Step 3. CA-Signed 인증서 생성하기